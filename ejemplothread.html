

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Uso básico de un thread en CMSIS RTOS v2 &mdash; CMSIS-RTOS V2 Ejemplos 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=f2a433a1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Uso básico de threads en CMSIS RTOS v2" href="ejemplothreads.html" />
    <link rel="prev" title="1. Ejemplos básicos CMSIS RTOS V2" href="cmsis-rtos.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CMSIS-RTOS V2 Ejemplos
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cmsis-rtos.html">1. Ejemplos básicos CMSIS RTOS V2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Uso básico de un thread en CMSIS RTOS v2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#descripcion-general-de-ejemplothread">2.1. Descripción General de ejemplothread</a></li>
<li class="toctree-l2"><a class="reference internal" href="#estructura-de-datos">2.2. Estructura de Datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inicializacion-de-los-hilos">2.3. Inicialización de los hilos</a></li>
<li class="toctree-l2"><a class="reference internal" href="#funcion-del-hilo">2.4. Función del hilo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#uso-de-hal-y-cmsis-rtos">2.5. Uso de HAL y CMSIS RTOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#codigo-fuente">2.6. Código Fuente</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencias">2.7. Dependencias</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preguntas-y-respuestas-sobre-ejemplothread">2.8. Preguntas y respuestas sobre ejemplothread</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#que-hace-este-codigo">2.8.1. ¿Qué hace este código?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#que-es-la-estructura-mygpio-pin">2.8.2. ¿Qué es la estructura <cite>mygpio_pin</cite>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#como-se-inicializa-el-hilo">2.8.3. ¿Cómo se inicializa el hilo?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#que-hace-la-funcion-thread">2.8.4. ¿Qué hace la función <cite>Thread()</cite>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#que-significa-osdelay">2.8.5. ¿Qué significa <cite>osDelay()</cite>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#que-pasa-si-osthreadnew-devuelve-null">2.8.6. ¿Qué pasa si <cite>osThreadNew()</cite> devuelve NULL?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#que-ficheros-de-cabecera-se-utilizan">2.8.7. ¿Qué ficheros de cabecera se utilizan?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#determine-la-carga-de-la-cpu-en-esta-aplicacion">2.8.8. Determine la carga de la CPU en esta aplicación</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ejemplothreads.html">3. Uso básico de threads en CMSIS RTOS v2</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejemplothreads-queues.html">4. Uso básico de threads y colas en CMSIS RTOS v2</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejemplothreads-flags.html">5. Uso básico de threads y flags en CMSIS RTOS v2</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejemplothreads-software-timers.html">6. Uso básico de threads y software timers en CMSIS RTOS v2</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CMSIS-RTOS V2 Ejemplos</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">2. </span>Uso básico de un thread en CMSIS RTOS v2</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/ejemplothread.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="uso-basico-de-un-thread-en-cmsis-rtos-v2">
<span id="ejemplothread"></span><h1><span class="section-number">2. </span>Uso básico de un thread en CMSIS RTOS v2<a class="headerlink" href="#uso-basico-de-un-thread-en-cmsis-rtos-v2" title="Link to this heading"></a></h1>
<p>Esta sección describe el funcionamiento de un programa (<strong>ejemplothread</strong>) en C que utiliza CMSIS RTOS v2 y la biblioteca HAL de STM32 para controlar un LED mediante un hilo.</p>
<section id="descripcion-general-de-ejemplothread">
<h2><span class="section-number">2.1. </span>Descripción General de ejemplothread<a class="headerlink" href="#descripcion-general-de-ejemplothread" title="Link to this heading"></a></h2>
<p>El programa crea un hilo que maneja un LED conectado al pin PB0  del microcontrolador STM32F4.El hilo alterna el estado del LED con una frecuencia configurable, utilizando funciones del sistema operativo en tiempo real (RTOS) y la biblioteca HAL para la configuración y manipulación de los pines GPIO.</p>
</section>
<section id="estructura-de-datos">
<h2><span class="section-number">2.2. </span>Estructura de Datos<a class="headerlink" href="#estructura-de-datos" title="Link to this heading"></a></h2>
<p>Se define una estructura llamada <code class="docutils literal notranslate"><span class="pre">mygpio_pin</span></code> que encapsula toda la información necesaria para controlar un LED:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GPIO_InitTypeDef</span> <span class="pre">pin</span></code>: configuración del pin (modo, velocidad, tipo de salida).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GPIO_TypeDef</span> <span class="pre">*port</span></code>: puerto GPIO al que pertenece el pin.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">delay</span></code>: retardo en ms entre cada cambio de estado del LED.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uint8_t</span> <span class="pre">counter</span></code>: contador que se alterna en cada iteración del hilo.</p></li>
</ul>
<p>Esta estructura permite pasar todos los parámetros necesarios a la función del hilo de forma organizada.</p>
</section>
<section id="inicializacion-de-los-hilos">
<h2><span class="section-number">2.3. </span>Inicialización de los hilos<a class="headerlink" href="#inicializacion-de-los-hilos" title="Link to this heading"></a></h2>
<p>La función <code class="docutils literal notranslate"><span class="pre">Init_Thread</span></code> realiza las siguientes tareas:</p>
<ol class="arabic simple">
<li><p>Habilita el reloj del puerto GPIOB.</p></li>
<li><p>Configura <code class="docutils literal notranslate"><span class="pre">mygpio_pin</span></code> para el pin PB0.</p></li>
<li><p>Crea un hilo con <code class="docutils literal notranslate"><span class="pre">osThreadNew</span></code>, que ejecuta la función <code class="docutils literal notranslate"><span class="pre">Thread</span></code> pasándole una estructura <code class="docutils literal notranslate"><span class="pre">mygpio_pin</span></code> para el pin PB0.</p></li>
</ol>
</section>
<section id="funcion-del-hilo">
<h2><span class="section-number">2.4. </span>Función del hilo<a class="headerlink" href="#funcion-del-hilo" title="Link to this heading"></a></h2>
<p>La función <code class="docutils literal notranslate"><span class="pre">Thread</span></code> realiza lo siguiente:</p>
<ol class="arabic simple">
<li><p>Inicializa el pin GPIO usando <code class="docutils literal notranslate"><span class="pre">HAL_GPIO_Init</span></code>.</p></li>
<li><p>Entra en un bucle infinito donde:
- Alterna el valor del contador con <code class="docutils literal notranslate"><span class="pre">~counter</span></code>.
- Cambia el estado del pin con <code class="docutils literal notranslate"><span class="pre">HAL_GPIO_TogglePin</span></code>.
- Espera el tiempo definido en <code class="docutils literal notranslate"><span class="pre">delay</span></code> usando <code class="docutils literal notranslate"><span class="pre">osDelay</span></code>.</p></li>
</ol>
<p>Esto provoca que el LED conectado al pin correspondiente parpadee con una frecuencia que es configurable.</p>
</section>
<section id="uso-de-hal-y-cmsis-rtos">
<h2><span class="section-number">2.5. </span>Uso de HAL y CMSIS RTOS<a class="headerlink" href="#uso-de-hal-y-cmsis-rtos" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>HAL (Hardware Abstraction Layer)</strong>: se utiliza para configurar e inicializar los pines GPIO de forma sencilla y portable.</p></li>
<li><p><strong>CMSIS RTOS v2</strong>: proporciona las funciones para crear y gestionar hilos, como <code class="docutils literal notranslate"><span class="pre">osThreadNew</span></code> y <code class="docutils literal notranslate"><span class="pre">osDelay</span></code>.</p></li>
</ul>
</section>
<section id="codigo-fuente">
<h2><span class="section-number">2.6. </span>Código Fuente<a class="headerlink" href="#codigo-fuente" title="Link to this heading"></a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cmsis_os2.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;stm32f4xx_hal.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>

<span class="n">osThreadId_t</span><span class="w"> </span><span class="n">tid_Thread</span><span class="p">;</span>

<span class="n">GPIO_InitTypeDef</span><span class="w"> </span><span class="n">led_ld1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">Pin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_PIN_0</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">Mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_MODE_OUTPUT_PP</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">Pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_NOPULL</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">Speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_SPEED_FREQ_LOW</span>
<span class="p">};</span>



<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">GPIO_InitTypeDef</span><span class="w"> </span><span class="n">pin</span><span class="p">;</span>
<span class="w">    </span><span class="n">GPIO_TypeDef</span><span class="w"> </span><span class="o">*</span><span class="n">port</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">delay</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">counter</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">mygpio_pin</span><span class="p">;</span>

<span class="n">mygpio_pin</span><span class="w"> </span><span class="n">pinB0</span><span class="p">;</span>


<span class="kt">int</span><span class="w"> </span><span class="nf">Init_Thread</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">__HAL_RCC_GPIOB_CLK_ENABLE</span><span class="p">();</span>

<span class="w">    </span><span class="n">pinB0</span><span class="p">.</span><span class="n">pin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">led_ld1</span><span class="p">;</span>
<span class="w">    </span><span class="n">pinB0</span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIOB</span><span class="p">;</span>
<span class="w">    </span><span class="n">pinB0</span><span class="p">.</span><span class="n">delay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">;</span>
<span class="w">    </span><span class="n">pinB0</span><span class="p">.</span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">tid_Thread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">osThreadNew</span><span class="p">(</span><span class="n">Thread</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">pinB0</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tid_Thread</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">Thread</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">argument</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">mygpio_pin</span><span class="w"> </span><span class="o">*</span><span class="n">gpio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">mygpio_pin</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">argument</span><span class="p">;</span>
<span class="w">    </span><span class="n">HAL_GPIO_Init</span><span class="p">(</span><span class="n">gpio</span><span class="o">-&gt;</span><span class="n">port</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">gpio</span><span class="o">-&gt;</span><span class="n">pin</span><span class="p">));</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">gpio</span><span class="o">-&gt;</span><span class="n">counter</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">gpio</span><span class="o">-&gt;</span><span class="n">port</span><span class="p">,</span><span class="w"> </span><span class="n">gpio</span><span class="o">-&gt;</span><span class="n">pin</span><span class="p">.</span><span class="n">Pin</span><span class="p">);</span>
<span class="w">        </span><span class="n">osDelay</span><span class="p">(</span><span class="n">gpio</span><span class="o">-&gt;</span><span class="n">delay</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="dependencias">
<h2><span class="section-number">2.7. </span>Dependencias<a class="headerlink" href="#dependencias" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Librería HAL de STM32.</p></li>
<li><p>CMSIS RTOS v2.</p></li>
</ul>
</section>
<section id="preguntas-y-respuestas-sobre-ejemplothread">
<h2><span class="section-number">2.8. </span>Preguntas y respuestas sobre ejemplothread<a class="headerlink" href="#preguntas-y-respuestas-sobre-ejemplothread" title="Link to this heading"></a></h2>
<p>Esta sección contiene una serie de preguntas con sus respectivas respuestas sobre el funcionamiento del código que utiliza CMSIS RTOS v2 para controlar LEDs en una placa STM32.</p>
<section id="que-hace-este-codigo">
<h3><span class="section-number">2.8.1. </span>¿Qué hace este código?<a class="headerlink" href="#que-hace-este-codigo" title="Link to this heading"></a></h3>
<p>Este código crea un hilo (thread) que controla un LED conectado al pin PB0 de una placa STM32F429. El hilo alterna el estado del LED (encendido/apagado) con una frecuencia determinada utilizando funciones del sistema operativo en tiempo real CMSIS RTOS v2.
Dentro del código del Thread se realiza un casting al tipo de estructura que se utiliza en el ejemplo</p>
</section>
<section id="que-es-la-estructura-mygpio-pin">
<h3><span class="section-number">2.8.2. </span>¿Qué es la estructura <cite>mygpio_pin</cite>?<a class="headerlink" href="#que-es-la-estructura-mygpio-pin" title="Link to this heading"></a></h3>
<p>Es una estructura de datos que encapsula la información necesaria para controlar un pin GPIO en este ejemplo:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pin</span></code>: configuración del pin (tipo, velocidad, modo).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">port</span></code>: puerto GPIO al que pertenece el pin (por ejemplo, GPIOB).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code>: retardo en ms entre cada cambio de estado (toggle).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">counter</span></code>: variable auxiliar que cuenta la cantidad de veces que se ha realizado el toggle.</p></li>
</ul>
</section>
<section id="como-se-inicializa-el-hilo">
<h3><span class="section-number">2.8.3. </span>¿Cómo se inicializa el hilo?<a class="headerlink" href="#como-se-inicializa-el-hilo" title="Link to this heading"></a></h3>
<p>La función <code class="docutils literal notranslate"><span class="pre">Init_Thread()</span></code> habilita el reloj del puerto GPIOB, rellena los parámetros de la estructura y crea un hilo con la función <code class="docutils literal notranslate"><span class="pre">osThreadNew()</span></code>, pasando como argumento la estructura <code class="docutils literal notranslate"><span class="pre">mygpio_pin</span></code> correspondiente a cada LED.</p>
</section>
<section id="que-hace-la-funcion-thread">
<h3><span class="section-number">2.8.4. </span>¿Qué hace la función <cite>Thread()</cite>?<a class="headerlink" href="#que-hace-la-funcion-thread" title="Link to this heading"></a></h3>
<p>La función <code class="docutils literal notranslate"><span class="pre">Thread(void</span> <span class="pre">*argument)</span></code> se encarga de:</p>
<ol class="arabic simple">
<li><p>Inicializar el pin GPIO usando <code class="docutils literal notranslate"><span class="pre">HAL_GPIO_Init</span></code>.</p></li>
<li><p>Ejecutar un bucle infinito donde:
- Se incrementa el valor de  <code class="docutils literal notranslate"><span class="pre">counter</span></code>.
- Se cambia el estado del LED con <code class="docutils literal notranslate"><span class="pre">HAL_GPIO_TogglePin</span></code>.
- Se espera el tiempo definido en <code class="docutils literal notranslate"><span class="pre">delay</span></code> usando <code class="docutils literal notranslate"><span class="pre">osDelay</span></code>.</p></li>
</ol>
</section>
<section id="que-significa-osdelay">
<h3><span class="section-number">2.8.5. </span>¿Qué significa <cite>osDelay()</cite>?<a class="headerlink" href="#que-significa-osdelay" title="Link to this heading"></a></h3>
<p>Es una función del RTOS que suspende la ejecución del hilo actual durante un número determinado de ms.
Esto permite que otros hilos se ejecuten mientras tanto. <code class="docutils literal notranslate"><span class="pre">osDelay</span></code> tiene como parámetro el número de ticks que la tarea estará bloqueada.
El número de ticks por segundo se define en el archivo <code class="docutils literal notranslate"><span class="pre">RTX_Config.h</span></code> (parámetro <code class="docutils literal notranslate"><span class="pre">Kernel</span> <span class="pre">Tick</span> <span class="pre">Frequency</span> <span class="pre">[Hz]</span></code>). En este ejemplo se ha configurado a 1000, por lo que un tick equivale a 1 ms.</p>
</section>
<section id="que-pasa-si-osthreadnew-devuelve-null">
<h3><span class="section-number">2.8.6. </span>¿Qué pasa si <cite>osThreadNew()</cite> devuelve NULL?<a class="headerlink" href="#que-pasa-si-osthreadnew-devuelve-null" title="Link to this heading"></a></h3>
<p>Significa que no se pudo crear el hilo. En ese caso, la función <code class="docutils literal notranslate"><span class="pre">Init_Thread()</span></code> devuelve -1 como señal de error. Si el programa principal que llama a esta función no comprueba el retorno no hay ningún control de errores.</p>
</section>
<section id="que-ficheros-de-cabecera-se-utilizan">
<h3><span class="section-number">2.8.7. </span>¿Qué ficheros de cabecera se utilizan?<a class="headerlink" href="#que-ficheros-de-cabecera-se-utilizan" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cmsis_os2.h</span></code>: para funciones del sistema operativo en tiempo real.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stm32f4xx_hal.h</span></code>: para funciones de acceso a hardware (HAL).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stdlib.h</span></code>: para funciones estándar de C que en este caso no se están incluyendo en el código.</p></li>
</ul>
</section>
<section id="determine-la-carga-de-la-cpu-en-esta-aplicacion">
<h3><span class="section-number">2.8.8. </span>Determine la carga de la CPU en esta aplicación<a class="headerlink" href="#determine-la-carga-de-la-cpu-en-esta-aplicacion" title="Link to this heading"></a></h3>
<p>Para determinar la carga que supone la ejecución del thread para la CPU se puede utilizar la utilidad de <code class="docutils literal notranslate"><span class="pre">Performance</span> <span class="pre">Analyzer</span></code> en modo simulación.
La carga de CPU obtenida es insignificante. Si se cambia en la estructura de datos el campo <code class="docutils literal notranslate"><span class="pre">delay</span></code> por 0 la carga del Thread pasa a ser del 19%.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cmsis-rtos.html" class="btn btn-neutral float-left" title="1. Ejemplos básicos CMSIS RTOS V2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ejemplothreads.html" class="btn btn-neutral float-right" title="3. Uso básico de threads en CMSIS RTOS v2" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Universidad Politécnica de Madrid.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>